{"swagger":"2.0","info":{"title":"蚁动事件引擎","description":"这是一个事件服务引擎","version":""},"host":"localhost:8080","schemes":["http"],"consumes":["application/json"],"produces":["application/json"],"paths":{"/swagger.json":{"get":{"summary":"Download swagger/swagger.json","operationId":"swagger#/swagger.json","responses":{"200":{"description":"File downloaded","schema":{"type":"file"}}},"schemes":["http"]}},"/ui/{filepath}":{"get":{"summary":"Download dist","operationId":"public#/ui/*filepath","parameters":[{"name":"filepath","in":"path","description":"Relative file path","required":true,"type":"string"}],"responses":{"200":{"description":"File downloaded","schema":{"type":"file"}},"404":{"description":"File not found","schema":{"$ref":"#/definitions/error"}}},"schemes":["http"]}},"/v1/admin/event/analysis":{"get":{"tags":["analysis"],"summary":"list analysis","description":"事件发生历史","operationId":"analysis#list","produces":["vnd.ant.error+json","vnd.ant.error+json","vnd.ant.reg.list+json"],"parameters":[{"name":"action","in":"query","description":"行为","required":false,"type":"string"},{"name":"count","in":"query","description":"分页数量","required":false,"type":"integer","minimum":5},{"name":"etype","in":"query","description":"事件类型","required":false,"type":"string"},{"name":"from","in":"query","description":"来源","required":false,"type":"string"},{"name":"page","in":"query","description":"查询分页","required":false,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AntRegList"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/AntError"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/AntError"}}},"schemes":["http"]}},"/v1/admin/event/analysis/hook/{eid}":{"get":{"tags":["analysis"],"summary":"hook analysis","description":"事件回调执行情况","operationId":"analysis#hook","produces":["vnd.ant.error+json","vnd.ant.error+json","vnd.ant.even.back+json; type=collection"],"parameters":[{"name":"action","in":"query","description":"事件行为,指定该值则只返回该事件该行为的钩子调用情况,不指定,返回该事件所有行为调用情况","required":false,"type":"integer"},{"name":"eid","in":"path","description":"事件事件唯一标识","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AntEvenBackCollection"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/AntError"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/AntError"}}},"schemes":["http"]}},"/v1/admin/listen":{"get":{"tags":["listen"],"summary":"list listen","description":"获取注册事件监听列表","operationId":"listen#list","produces":["vnd.ant.error+json","vnd.ant.error+json","vnd.ant.reg.list+json"],"parameters":[{"name":"action","in":"query","description":"事件行为,不设置该项则查询所有行为","required":false,"type":"string"},{"name":"count","in":"query","description":"分页数量","required":false,"type":"integer","minimum":5},{"name":"etype","in":"query","description":"事件类型,不设置则查询所有事件类型","required":false,"type":"string"},{"name":"page","in":"query","description":"分页","required":false,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AntRegList"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/AntError"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/AntError"}}},"schemes":["http"]},"post":{"tags":["listen"],"summary":"add listen","description":"注册事件监听","operationId":"listen#add","produces":["vnd.ant.error+json","vnd.ant.error+json","vnd.ant.reg.result+json"],"parameters":[{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/AddListenPayload"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AntRegResult"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/AntError"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/AntError"}}},"schemes":["http"]}},"/v1/admin/listen/{rid}":{"put":{"tags":["listen"],"summary":"update listen","description":"修改注册事件监听","operationId":"listen#update","produces":["vnd.ant.error+json","vnd.ant.error+json","vnd.ant.reg.result+json"],"parameters":[{"name":"rid","in":"path","required":true,"type":"string"},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/UpdateListenPayload"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AntRegResult"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/AntError"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/AntError"}}},"schemes":["http"]},"delete":{"tags":["listen"],"summary":"remove listen","description":"取消事件监听","operationId":"listen#remove","produces":["vnd.ant.error+json","vnd.ant.error+json","vnd.ant.result+json"],"parameters":[{"name":"rid","in":"path","description":"事件监听唯一标识","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AntResult"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/AntError"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/AntError"}}},"schemes":["http"]}},"/v1/event":{"post":{"tags":["event"],"summary":"post event","description":"创建一个事件","operationId":"event#post","produces":["vnd.ant.error+json","vnd.ant.error+json","vnd.ant.result+json"],"parameters":[{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/PostEventPayload"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AntResult"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/AntError"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/AntError"}}},"schemes":["http"]}},"/v1/event/{eid}":{"put":{"tags":["event"],"summary":"put event","description":"创建一个事件","operationId":"event#put","produces":["vnd.ant.error+json","vnd.ant.error+json","vnd.ant.result+json"],"parameters":[{"name":"eid","in":"path","description":"事件唯一标识","required":true,"type":"string"},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/PutEventPayload"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AntResult"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/AntError"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/AntError"}}},"schemes":["http"]}}},"definitions":{"AddListenPayload":{"title":"AddListenPayload","type":"object","properties":{"action":{"type":"string","description":"事件行为,不设置该项则注册监听所有行为变化","example":"Vero et illum ducimus."},"etype":{"type":"string","description":"事件类型","example":"Quia perferendis nemo eligendi."},"from":{"type":"string","description":"注册事件监听的服务器标识","example":"Molestiae voluptates sed."},"hookurl":{"type":"string","description":"钩子url","example":"Labore ut."}},"example":{"action":"Vero et illum ducimus.","etype":"Quia perferendis nemo eligendi.","from":"Molestiae voluptates sed.","hookurl":"Labore ut."},"required":["etype","hookurl","from"]},"AntError":{"title":"Mediatype identifier: vnd.ant.error+json; view=default","type":"object","properties":{"msg":{"type":"string","description":"错误描述","example":"At architecto consectetur voluptas quod ut id."}},"description":"处理失败 (default view)","example":{"msg":"At architecto consectetur voluptas quod ut id."}},"AntEvenBack":{"title":"Mediatype identifier: vnd.ant.even.back+json; view=default","type":"object","properties":{"eid":{"type":"string","description":"事件唯一标识","example":"Quia architecto."},"endTime":{"type":"string","description":"执行结束时间","example":"1986-09-12T07:55:11+09:00","format":"date-time"},"error":{"type":"string","description":"执行错误时的错误信息","example":"Voluptatum neque possimus alias doloremque minima."},"execTime":{"type":"integer","description":"执行时间,单位纳秒","example":4102594716043012514,"format":"int64"},"hookurl":{"type":"string","description":"钩子url","example":"Ut officia natus ut quidem pariatur voluptatem."},"startTime":{"type":"string","description":"开始执行时间","example":"1973-10-08T22:40:23+08:00","format":"date-time"},"success":{"type":"boolean","description":"执行是否成功","example":false}},"description":"事件监听信息 (default view)","example":{"eid":"Quia architecto.","endTime":"1986-09-12T07:55:11+09:00","error":"Voluptatum neque possimus alias doloremque minima.","execTime":4102594716043012514,"hookurl":"Ut officia natus ut quidem pariatur voluptatem.","startTime":"1973-10-08T22:40:23+08:00","success":false},"required":["eid","hookurl","startTime","endTime","execTime","success"]},"AntEvenBackCollection":{"title":"Mediatype identifier: vnd.ant.even.back+json; type=collection; view=default","type":"array","items":{"$ref":"#/definitions/AntEvenBack"},"description":"AntEvenBackCollection is the media type for an array of AntEvenBack (default view)","example":[{"eid":"Quia architecto.","endTime":"1986-09-12T07:55:11+09:00","error":"Voluptatum neque possimus alias doloremque minima.","execTime":4102594716043012514,"hookurl":"Ut officia natus ut quidem pariatur voluptatem.","startTime":"1973-10-08T22:40:23+08:00","success":false},{"eid":"Quia architecto.","endTime":"1986-09-12T07:55:11+09:00","error":"Voluptatum neque possimus alias doloremque minima.","execTime":4102594716043012514,"hookurl":"Ut officia natus ut quidem pariatur voluptatem.","startTime":"1973-10-08T22:40:23+08:00","success":false}]},"AntReg":{"title":"Mediatype identifier: vnd.ant.reg+json; view=default","type":"object","properties":{"action":{"type":"string","description":"事件行为,不设置该项则注册监听所有行为变化","example":"Eius ad."},"etype":{"type":"string","description":"事件类型","example":"Suscipit sed ut laudantium illo non."},"from":{"type":"string","description":"产生事件的服务器标识","example":"Earum et quia quia cum voluptate."},"hookurl":{"type":"string","description":"钩子url","example":"Ut quam fugiat aliquid."},"rid":{"type":"string","description":"注册事件监听唯一标识","example":"Consequatur recusandae repellendus rerum dolorem libero sunt."}},"description":"事件监听信息 (default view)","example":{"action":"Eius ad.","etype":"Suscipit sed ut laudantium illo non.","from":"Earum et quia quia cum voluptate.","hookurl":"Ut quam fugiat aliquid.","rid":"Consequatur recusandae repellendus rerum dolorem libero sunt."},"required":["rid","etype","hookurl","from"]},"AntRegList":{"title":"Mediatype identifier: vnd.ant.reg.list+json; view=default","type":"object","properties":{"list":{"type":"array","items":{"$ref":"#/definitions/AntReg"},"description":"事件类型","example":[{"action":"Eius ad.","etype":"Suscipit sed ut laudantium illo non.","from":"Earum et quia quia cum voluptate.","hookurl":"Ut quam fugiat aliquid.","rid":"Consequatur recusandae repellendus rerum dolorem libero sunt."}]},"total":{"type":"integer","description":"总数量","example":7836322977799802698,"format":"int64"}},"description":"事件监听列表 (default view)","example":{"list":[{"action":"Eius ad.","etype":"Suscipit sed ut laudantium illo non.","from":"Earum et quia quia cum voluptate.","hookurl":"Ut quam fugiat aliquid.","rid":"Consequatur recusandae repellendus rerum dolorem libero sunt."}],"total":7836322977799802698},"required":["total"]},"AntRegResult":{"title":"Mediatype identifier: vnd.ant.reg.result+json; view=default","type":"object","properties":{"ok":{"type":"boolean","description":"成功标识","example":false}},"description":"注册事件监听成功 (default view)","example":{"ok":false}},"AntResult":{"title":"Mediatype identifier: vnd.ant.result+json; view=default","type":"object","properties":{"eid":{"type":"string","description":"事件唯一标识","example":"Aliquid optio odio provident."}},"description":"创建事件成功返回 (default view)","example":{"eid":"Aliquid optio odio provident."}},"PostEventPayload":{"title":"PostEventPayload","type":"object","properties":{"action":{"type":"string","description":"事件行为","example":"Quam ut."},"etype":{"type":"string","description":"事件类型","example":"Optio dicta molestias."},"from":{"type":"string","description":"产生事件的服务器标识","example":"Ut non et."},"occtime":{"type":"string","description":"事件发生时间","example":"Officia aperiam est consequatur."},"params":{"description":"事件发生时间","example":true}},"example":{"action":"Quam ut.","etype":"Optio dicta molestias.","from":"Ut non et.","occtime":"Officia aperiam est consequatur.","params":true},"required":["etype","action","from"]},"PutEventPayload":{"title":"PutEventPayload","type":"object","properties":{"action":{"type":"string","description":"事件行为","example":"Dolorem quis dolorem perferendis saepe neque."},"etype":{"type":"string","description":"事件类型","example":"Id tenetur ea sapiente eum commodi."},"from":{"type":"string","description":"产生事件的服务器标识","example":"Est voluptas dolorum qui dolore unde."},"occtime":{"type":"string","description":"事件发生时间","example":"Rem tempore."},"params":{"description":"事件发生时间","example":"1977-05-08T18:42:53+08:00"}},"example":{"action":"Dolorem quis dolorem perferendis saepe neque.","etype":"Id tenetur ea sapiente eum commodi.","from":"Est voluptas dolorum qui dolore unde.","occtime":"Rem tempore.","params":"1977-05-08T18:42:53+08:00"},"required":["etype","action","from"]},"UpdateListenPayload":{"title":"UpdateListenPayload","type":"object","properties":{"action":{"type":"string","description":"事件行为,不设置该项则注册监听所有行为变化","example":"Modi et inventore rem ut."},"etype":{"type":"string","description":"事件类型","example":"Sunt enim."},"from":{"type":"string","description":"产生事件的服务器标识","example":"Eaque odio officiis rerum eos delectus."},"hookurl":{"type":"string","description":"钩子url","example":"Vero et magnam pariatur pariatur rerum et."}},"example":{"action":"Modi et inventore rem ut.","etype":"Sunt enim.","from":"Eaque odio officiis rerum eos delectus.","hookurl":"Vero et magnam pariatur pariatur rerum et."},"required":["etype","hookurl","from"]},"error":{"title":"Mediatype identifier: application/vnd.goa.error; view=default","type":"object","properties":{"code":{"type":"string","description":"an application-specific error code, expressed as a string value.","example":"invalid_value"},"detail":{"type":"string","description":"a human-readable explanation specific to this occurrence of the problem.","example":"Value of ID must be an integer"},"id":{"type":"string","description":"a unique identifier for this particular occurrence of the problem.","example":"3F1FKVRR"},"meta":{"type":"object","description":"a meta object containing non-standard meta-information about the error.","example":{"timestamp":1458609066},"additionalProperties":true},"status":{"type":"string","description":"the HTTP status code applicable to this problem, expressed as a string value.","example":"400"}},"description":"Error response media type (default view)","example":{"code":"invalid_value","detail":"Value of ID must be an integer","id":"3F1FKVRR","meta":{"timestamp":1458609066},"status":"400"}}}}